# Media Hub

> ğŸš§ **å¼€å‘çŠ¶æ€** - æ­¤é¡¹ç›®æ­£åœ¨ç§¯æå¼€å‘ä¸­ï¼ŒåŠŸèƒ½å’Œ API å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–

ä¸€ä¸ªåŸºäº Rust + Vue 3 çš„ç°ä»£åŒ–åª’ä½“ç®¡ç†å¹³å°ï¼Œé›†æˆäº†ä¼ä¸šçº§ JWT è®¤è¯ç³»ç»Ÿå’Œ WASM åª’ä½“å¤„ç†èƒ½åŠ›ã€‚

## âœ¨ ç‰¹æ€§

### ğŸ” å®‰å…¨è®¤è¯
- **ä¼ä¸šçº§ JWT è®¤è¯ç³»ç»Ÿ**ï¼šHttpOnly Cookie + åŒå±‚å­˜å‚¨ç­–ç•¥
- **æ™ºèƒ½è®¤è¯çŠ¶æ€ç®¡ç†**ï¼šåŒæ­¥æ£€æŸ¥ + å¼‚æ­¥éªŒè¯å¹³è¡¡æ€§èƒ½ä¸å‡†ç¡®æ€§
- **å¤šé‡å®‰å…¨é˜²æŠ¤**ï¼šbcrypt å¯†ç å“ˆå¸Œ + JWT ç­¾å + CSRF ä¿æŠ¤

### ğŸ—ï¸ ç°ä»£åŒ–æ¶æ„
- **ç»Ÿä¸€åŸŸåæ¶æ„**ï¼šNginx åå‘ä»£ç†è§£å†³è·¨åŸŸé—®é¢˜
- **æ— çŠ¶æ€åç«¯**ï¼šæ”¯æŒæ°´å¹³æ‰©å±•çš„åˆ†å¸ƒå¼éƒ¨ç½²
- **ç±»å‹å®‰å…¨**ï¼šå…¨æ ˆ TypeScript + Rust ç±»å‹ä¿éšœ

### ğŸš€ é«˜æ€§èƒ½
- **WASM åª’ä½“å¤„ç†**ï¼šæµè§ˆå™¨ç«¯é«˜æ€§èƒ½åª’ä½“æ–‡ä»¶å¤„ç†
- **æ™ºèƒ½ç¼“å­˜**ï¼šé™æ€èµ„æºé•¿æœŸç¼“å­˜ + API å“åº”ä¼˜åŒ–
- **å¼‚æ­¥æ¶æ„**ï¼šTokio å¼‚æ­¥è¿è¡Œæ—¶ + Vue 3 Composition API

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **Rust** - ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ï¼Œé«˜æ€§èƒ½ä¸å†…å­˜å®‰å…¨
- **Axum** - ç°ä»£åŒ–å¼‚æ­¥ Web æ¡†æ¶
- **JWT** - æ— çŠ¶æ€è®¤è¯ä»¤ç‰Œ
- **bcrypt** - å¯†ç å®‰å…¨å“ˆå¸Œ
- **WASM** - WebAssembly åª’ä½“å¤„ç†æ¨¡å—

### å‰ç«¯
- **Vue 3** - æ¸è¿›å¼ JavaScript æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨çš„ JavaScript è¶…é›†
- **Tailwind CSS** - å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶
- **Axios** - HTTP å®¢æˆ·ç«¯åº“
- **Vue Router** - å®˜æ–¹è·¯ç”±ç®¡ç†å™¨

### åŸºç¡€è®¾æ–½
- **Nginx** - é«˜æ€§èƒ½åå‘ä»£ç†æœåŠ¡å™¨
- **Vite** - ç°ä»£åŒ–å‰ç«¯æ„å»ºå·¥å…·
- **ESLint** - ä»£ç è´¨é‡æ£€æŸ¥å·¥å…·

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
media-hub/
â”œâ”€â”€ backend/                 # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ media-server/       # ä¸»æœåŠ¡å™¨
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ main.rs     # æœåŠ¡å…¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.rs     # è®¤è¯ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ jwt.rs      # JWT å¤„ç†
â”‚   â”‚   â”‚   â””â”€â”€ user.rs     # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â””â”€â”€ Cargo.toml
â”‚   â””â”€â”€ media-wasm/         # WASM æ¨¡å—
â”‚       â”œâ”€â”€ src/
â”‚       â””â”€â”€ Cargo.toml
â”œâ”€â”€ frontend/               # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/           # API å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ components/    # Vue ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ views/         # é¡µé¢è§†å›¾
â”‚   â”‚   â”œâ”€â”€ router/        # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”œâ”€â”€ nginx-media-hub.conf    # Nginx é…ç½®
â””â”€â”€ README.md
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Rust** >= 1.70
- **Node.js** >= 18
- **Nginx** (ç”¨äºç”Ÿäº§éƒ¨ç½²)

### å®‰è£…ä¾èµ–

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd media-hub

# å®‰è£…å‰ç«¯ä¾èµ–
cd frontend
npm install

# æ„å»ºåç«¯
cd ../backend/media-server
cargo build --release
```

### å¼€å‘ç¯å¢ƒ

```bash
# å¯åŠ¨åç«¯æœåŠ¡ (ç»ˆç«¯1)
cd backend/media-server
cargo run

# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ (ç»ˆç«¯2)
cd frontend
npm run dev
```

### ç”Ÿäº§éƒ¨ç½²

```bash
# æ„å»ºå‰ç«¯
cd frontend
npm run build

# é…ç½® Nginx
sudo cp nginx-media-hub.conf /etc/nginx/sites-available/media-hub
sudo ln -s /etc/nginx/sites-available/media-hub /etc/nginx/sites-enabled/
sudo nginx -t && sudo systemctl reload nginx

# å¯åŠ¨åç«¯æœåŠ¡
cd backend/media-server
cargo run --release
```

## ğŸ”§ é…ç½®

### ç¯å¢ƒå˜é‡

```bash
# JWT å¯†é’¥ (ç”Ÿäº§ç¯å¢ƒå¿…é¡»è®¾ç½®)
export JWT_SECRET="your-secret-key-here"

# æœåŠ¡ç«¯å£
export PORT=8000
```

### Nginx é…ç½®

é¡¹ç›®åŒ…å«å®Œæ•´çš„ Nginx é…ç½®æ–‡ä»¶ `nginx-media-hub.conf`ï¼Œæä¾›ï¼š
- å‰ç«¯é™æ€æ–‡ä»¶æœåŠ¡
- åç«¯ API åå‘ä»£ç†
- é™æ€èµ„æºç¼“å­˜ä¼˜åŒ–
- SPA è·¯ç”±æ”¯æŒ

## ğŸ” è®¤è¯ç³»ç»Ÿ

### è®¾è®¡ç‰¹ç‚¹

- **HttpOnly Cookie**ï¼štoken å­˜å‚¨åœ¨ HttpOnly Cookie ä¸­ï¼Œé˜²æ­¢ XSS æ”»å‡»
- **åŒå±‚å­˜å‚¨**ï¼šCookie å­˜å‚¨ tokenï¼ŒlocalStorage å­˜å‚¨ç”¨æˆ·ä¿¡æ¯
- **æ™ºèƒ½éªŒè¯**ï¼šæœ¬åœ°å¿«é€Ÿæ£€æŸ¥ + æœåŠ¡ç«¯å‡†ç¡®éªŒè¯
- **è‡ªåŠ¨ç®¡ç†**ï¼šç™»å½•/ç™»å‡ºçŠ¶æ€è‡ªåŠ¨åŒæ­¥ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†

### è®¤è¯æµç¨‹

1. **æ³¨å†Œ**ï¼šç”¨æˆ·åå”¯ä¸€æ€§æ£€æŸ¥ â†’ å¯†ç å“ˆå¸Œå­˜å‚¨
2. **ç™»å½•**ï¼šå‡­æ®éªŒè¯ â†’ JWT ç”Ÿæˆ â†’ HttpOnly Cookie è®¾ç½®
3. **è¯·æ±‚è®¤è¯**ï¼šCookie è‡ªåŠ¨å‘é€ â†’ ä¸­é—´ä»¶éªŒè¯ â†’ ç”¨æˆ·ä¿¡æ¯æ³¨å…¥
4. **ç™»å‡º**ï¼šCookie æ¸…é™¤ â†’ æœ¬åœ°çŠ¶æ€æ¸…ç† â†’ é¡µé¢é‡å®šå‘

## ğŸ§ª å¼€å‘

### ä»£ç è§„èŒƒ

```bash
# å‰ç«¯ä»£ç æ£€æŸ¥
cd frontend
npm run lint
npm run lint:fix

# åç«¯ä»£ç æ ¼å¼åŒ–
cd backend/media-server
cargo fmt
cargo clippy
```

### æµ‹è¯•

```bash
# åç«¯æµ‹è¯•
cd backend/media-server
cargo test

# å‰ç«¯æµ‹è¯•
cd frontend
npm run test
```

## ğŸ“‹ å¼€å‘çŠ¶æ€ä¸è®¡åˆ’

### âœ… å·²å®ŒæˆåŠŸèƒ½
- [x] **JWT è®¤è¯ç³»ç»Ÿ** - å®Œæ•´çš„ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€è®¤è¯ä¸­é—´ä»¶
- [x] **å‰åç«¯æ•´åˆ** - Vue 3 + Rust Axum å…¨æ ˆæ¶æ„
- [x] **Nginx éƒ¨ç½²é…ç½®** - ç”Ÿäº§ç¯å¢ƒåå‘ä»£ç†é…ç½®
- [x] **ç°ä»£åŒ– UI è®¾è®¡** - ç»Ÿä¸€çš„å¯¼èˆªæ å’Œå“åº”å¼ç•Œé¢
- [x] **åª’ä½“æ–‡ä»¶ç®¡ç†** - åŸºç¡€çš„åª’ä½“æ–‡ä»¶ CRUD æ“ä½œ
- [x] **æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½** - æ”¯æŒå¤šç§åª’ä½“æ ¼å¼ä¸Šä¼ 
- [x] **ç”¨æˆ·ä¸ªäººèµ„æ–™** - ç”¨æˆ·ä¿¡æ¯ç®¡ç†å’Œå¯†ç ä¿®æ”¹

### ğŸš§ å¼€å‘ä¸­åŠŸèƒ½
- [ ] **WASM åª’ä½“å¤„ç†æ¨¡å—** - æµè§ˆå™¨ç«¯åª’ä½“æ–‡ä»¶å¤„ç†
- [ ] **é«˜çº§åª’ä½“ç¼–è¾‘** - è£å‰ªã€æ»¤é•œã€æ ¼å¼è½¬æ¢
- [ ] **åª’ä½“æ ‡ç­¾ç³»ç»Ÿ** - åˆ†ç±»å’Œæœç´¢åŠŸèƒ½
- [ ] **æ‰¹é‡æ“ä½œ** - å¤šæ–‡ä»¶é€‰æ‹©å’Œæ‰¹é‡å¤„ç†

### ğŸ”® è®¡åˆ’åŠŸèƒ½
- [ ] **åª’ä½“åˆ†äº«** - å…¬å¼€é“¾æ¥å’Œæƒé™ç®¡ç†
- [ ] **API æ–‡æ¡£** - å®Œæ•´çš„ REST API æ–‡æ¡£
- [ ] **Docker éƒ¨ç½²** - å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆ
- [ ] **æ€§èƒ½ä¼˜åŒ–** - ç¼“å­˜ç­–ç•¥å’ŒåŠ è½½ä¼˜åŒ–
- [ ] **ç§»åŠ¨ç«¯é€‚é…** - PWA æ”¯æŒå’Œç§»åŠ¨ç«¯ä¼˜åŒ–

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License
